

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>cequalw2.visualization.plots &mdash; CE-QUAL-W2 Python Library v1.0.0</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=8d563738"></script>
      <script src="../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            CE-QUAL-W2 Python Library
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../quickstart.html">Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../user_guide.html">User Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../api.html">API Reference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../testing.html">Testing Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing.html">Contributing</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">CE-QUAL-W2 Python Library</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">cequalw2.visualization.plots</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for cequalw2.visualization.plots</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span><span class="w"> </span><span class="nn">warnings</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">seaborn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sns</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">matplotlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">mpl</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">yaml</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">List</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">OrderedDict</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">holoviews</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">hv</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">bokeh.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">HoverTool</span><span class="p">,</span> <span class="n">DatetimeTickFormatter</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">..fileio.readers</span><span class="w"> </span><span class="kn">import</span> <span class="n">read</span><span class="p">,</span> <span class="n">read_plot_control</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>

<span class="c1"># Use available style or default</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;seaborn-v0_8&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;seaborn&#39;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
        <span class="k">pass</span>  <span class="c1"># Use default style</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;figure.figsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;grid.color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;#E0E0E0&#39;</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;lines.linewidth&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.facecolor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;#FBFBFB&#39;</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s2">&quot;axes.edgecolor&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;#222222&#39;</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s2">&quot;axes.linewidth&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;black&#39;</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;black&#39;</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;figure.subplot.hspace&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.05</span>  <span class="c1"># Shrink the horizontal space</span>

<span class="c1"># Custom curve colors</span>
<span class="c1"># Using mountain and lake names for new color palettes</span>
<span class="n">rainbow</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;#3366CC&#39;</span><span class="p">,</span> <span class="s1">&#39;#0099C6&#39;</span><span class="p">,</span> <span class="s1">&#39;#109618&#39;</span><span class="p">,</span> <span class="s1">&#39;#FCE030&#39;</span><span class="p">,</span> <span class="s1">&#39;#FF9900&#39;</span><span class="p">,</span>
           <span class="s1">&#39;#DC3912&#39;</span><span class="p">]</span>  <span class="c1"># (blue, teal, green, yellow, orange, red)</span>
<span class="n">everest</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;#3366CC&#39;</span><span class="p">,</span> <span class="s1">&#39;#DC4020&#39;</span><span class="p">,</span> <span class="s1">&#39;#10AA18&#39;</span><span class="p">,</span> <span class="s1">&#39;#0099C6&#39;</span><span class="p">,</span> <span class="s1">&#39;#FCE030&#39;</span><span class="p">,</span>
           <span class="s1">&#39;#FF9900&#39;</span><span class="p">,</span> <span class="p">]</span>  <span class="c1"># (blue, red, green, teal, yellow, orange)</span>

<span class="n">k2</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s1">&#39;husl&#39;</span><span class="p">,</span> <span class="n">desat</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)[</span><span class="mi">4</span><span class="p">],</span>    <span class="c1"># blue</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s1">&#39;tab10&#39;</span><span class="p">)[</span><span class="mi">3</span><span class="p">],</span>              <span class="c1"># red</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s1">&#39;deep&#39;</span><span class="p">)[</span><span class="mi">2</span><span class="p">],</span>               <span class="c1"># green</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s1">&#39;tab10&#39;</span><span class="p">,</span> <span class="n">desat</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span>   <span class="c1"># purple</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s1">&#39;deep&#39;</span><span class="p">,</span> <span class="n">desat</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)[</span><span class="mi">4</span><span class="p">],</span>    <span class="c1"># purple</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s1">&#39;colorblind&#39;</span><span class="p">)[</span><span class="mi">2</span><span class="p">],</span>         <span class="c1"># sea green</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s1">&#39;colorblind&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>         <span class="c1"># deep blue</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s1">&#39;husl&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>                <span class="c1"># light red</span>
<span class="p">)</span>

<span class="c1"># Define string formatting constants, which work in string format statements</span>
<span class="n">DEG_C_ALT</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\N{DEGREE SIGN}</span><span class="s1">C&#39;</span>

<span class="c1"># Define default line color</span>
<span class="n">DEFAULT_COLOR</span> <span class="o">=</span> <span class="s1">&#39;#4488ee&#39;</span>

<div class="viewcode-block" id="get_colors">
<a class="viewcode-back" href="../../../api.html#cequalw2.visualization.get_colors">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">get_colors</span><span class="p">(</span><span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">palette</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">min_colors</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">6</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get a list of colors from Seaborn&#39;s color palette.</span>

<span class="sd">    :param df: The DataFrame used to determine the number of colors.</span>
<span class="sd">    :type df: pd.DataFrame</span>
<span class="sd">    :param palette: The name of the color palette to use.</span>
<span class="sd">    :type palette: str</span>
<span class="sd">    :param min_colors: The minimum number of colors to select. (Default: 6)</span>
<span class="sd">    :type min_colors: int, optional</span>

<span class="sd">    :return: A list of colors selected from the color palette.</span>
<span class="sd">    :rtype: List[str]</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">num_colors</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">),</span> <span class="n">min_colors</span><span class="p">)</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="n">palette</span><span class="p">,</span> <span class="n">num_colors</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">colors</span></div>



<div class="viewcode-block" id="simple_plot">
<a class="viewcode-back" href="../../../api.html#cequalw2.visualization.simple_plot">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">simple_plot</span><span class="p">(</span><span class="n">series</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This function creates a simple plot using Matplotlib and Pandas.</span>

<span class="sd">    :param series: A Pandas Series object containing the data to be plotted.</span>
<span class="sd">    :param **kwargs: Additional keyword arguments to customize the plot.</span>
<span class="sd">    :type **kwargs: keyword arguments</span>

<span class="sd">    :Keyword Arguments:</span>
<span class="sd">       - `title` (str) -- The title of the plot.</span>
<span class="sd">       - `ylabel` (str) -- The label for the y-axis.</span>
<span class="sd">       - `colors` (List[str]) -- A list of colors for the plot.</span>
<span class="sd">       - `figsize` (tuple) -- The figure size as a tuple of width and height.</span>
<span class="sd">       - `style` (str) -- The line style for the plot.</span>
<span class="sd">       - `palette` (str) -- The color palette to use.</span>

<span class="sd">    :returns: A Matplotlib Figure object representing the plot.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">ylabel</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ylabel&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">colors</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;colors&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">figsize</span><span class="p">:</span> <span class="nb">tuple</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;figsize&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span>
    <span class="n">style</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span>
    <span class="n">palette</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;palette&#39;</span><span class="p">,</span> <span class="s1">&#39;colorblind&#39;</span><span class="p">)</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">colors</span><span class="p">:</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="n">palette</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
        <span class="n">axes</span><span class="o">.</span><span class="n">set_prop_cycle</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="n">colors</span><span class="p">)</span>

    <span class="n">series</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="n">ylabel</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">)</span>
    <span class="n">axis</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
    <span class="n">axis</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">ylabel</span><span class="p">)</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>  <span class="c1"># This resolves a lot of layout issues</span>
    <span class="k">return</span> <span class="n">fig</span></div>



<div class="viewcode-block" id="plot">
<a class="viewcode-back" href="../../../api.html#cequalw2.visualization.plot">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">plot</span><span class="p">(</span><span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Plot a DataFrame using matplotlib.</span>

<span class="sd">    Args:</span>
<span class="sd">        df (pd.DataFrame): The DataFrame to be plotted.</span>
<span class="sd">        **kwargs: Additional keyword arguments for customizing the plot.</span>

<span class="sd">    Keyword Args:</span>
<span class="sd">        fig (plt.Figure): The figure object to use for the plot. If not provided, a new figure will be created.</span>
<span class="sd">        ax (plt.Axes): The axes object to use for the plot. If not provided, a new axes will be created.</span>
<span class="sd">        legend_values (List[str]): The legend labels for the plot.</span>
<span class="sd">        fig_size (tuple): The size of the figure in inches (width, height). Default is (15, 9).</span>
<span class="sd">        style (str): The line style of the plot. Default is &#39;-&#39;.</span>
<span class="sd">        colors: The colors to use for plotting.</span>

<span class="sd">    Returns:</span>
<span class="sd">        plt.Figure: The figure object containing the plot.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Parse the keyword arguments and set the defaults</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fig&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ax&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">legend_values</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;legend_values&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;legend_values&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;legend_values&#39;</span><span class="p">)</span>
    <span class="n">figsize</span><span class="p">:</span> <span class="nb">tuple</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fig_size&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span>
    <span class="n">style</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;colors&#39;</span><span class="p">,</span> <span class="n">k2</span><span class="p">)</span>
    <span class="n">ylabel</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ylabel&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="c1"># Create the figure and axes</span>
    <span class="k">if</span> <span class="n">fig</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">ax</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>

    <span class="c1"># Set the color cycle</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_prop_cycle</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="n">colors</span><span class="p">)</span>

    <span class="c1"># Set the keyword arguments for the plot</span>
    <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;fig&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fig</span>
    <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;ax&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ax</span>
    <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;style&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">style</span>
    <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;ylabel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ylabel</span>
    <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;legend&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="s1">&#39;colors&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;colors&#39;</span><span class="p">)</span>

    <span class="c1"># Create the plot</span>
    <span class="n">axes</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="c1"># Get a list of line objects</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_lines</span><span class="p">()</span>

    <span class="c1"># Create the legend</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">legend_values</span><span class="p">:</span>
        <span class="n">legend_values</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span>

    <span class="c1"># Set the legend below the bottom axis</span>
    <span class="n">num_legend_cols</span> <span class="o">=</span> <span class="mi">8</span>  <span class="c1"># Number of columns in the legend</span>
    <span class="n">num_legend_entries</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
    <span class="n">num_legend_rows</span> <span class="o">=</span> <span class="p">(</span><span class="n">num_legend_entries</span> <span class="o">+</span> <span class="n">num_legend_cols</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="n">num_legend_cols</span>
    <span class="c1"># Adjust the height based on the number of rows</span>
    <span class="n">legend_height</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.025</span> <span class="o">*</span> <span class="n">num_legend_rows</span> <span class="o">-</span> <span class="mf">0.1</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">legend_values</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper center&#39;</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">legend_height</span><span class="p">),</span> <span class="n">ncol</span><span class="o">=</span><span class="n">num_legend_cols</span><span class="p">,</span>
        <span class="n">fontsize</span><span class="o">=</span><span class="mi">9</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_height</span> <span class="o">=</span> <span class="mf">0.05</span> <span class="o">*</span> <span class="n">num_legend_rows</span>

    <span class="c1"># Set tight layout. This resolves a lot of layout issues.</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">fig</span></div>


<div class="viewcode-block" id="multi_plot">
<a class="viewcode-back" href="../../../api.html#cequalw2.visualization.multi_plot">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">multi_plot</span><span class="p">(</span><span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Plot a DataFrame using matplotlib separating the variables into multiple subplots.</span>

<span class="sd">    This function creates a subplot for each column of the provided DataFrame and plots the data using matplotlib.</span>
<span class="sd">    It supports various customization options such as specifying the figure and axes objects, figure size, title,</span>
<span class="sd">    x-label, y-labels, colors, line style, and color palette.</span>

<span class="sd">    Args:</span>
<span class="sd">        df (pd.DataFrame): The DataFrame containing the data to be plotted.</span>

<span class="sd">    Keyword Args:</span>
<span class="sd">        fig (plt.Figure, optional): The figure object to use for the plot. If not provided, a new figure will be created.</span>
<span class="sd">        ax (plt.Axes, optional): The axes object to use for the plot. If not provided, a new axes will be created.</span>
<span class="sd">        figsize (tuple, optional): The size of the figure in inches (width, height). Default is (15, 30).</span>
<span class="sd">        title (str, optional): The title of the plot.</span>
<span class="sd">        xlabel (str, optional): The label for the x-axis.</span>
<span class="sd">        ylabels (Union[str, List[str]], optional): The labels for the y-axes. If not provided, column names will be used.</span>
<span class="sd">        colors (Union[str, List[str]], optional): The colors to use for plotting. If not provided, a color palette will be used.</span>
<span class="sd">        style (str, optional): The line style of the plot. Default is &#39;-&#39;.</span>
<span class="sd">        palette (str, optional): The color palette to use. Default is &#39;colorblind&#39;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        plt.Figure: The figure object containing the subplots.</span>

<span class="sd">    Raises:</span>
<span class="sd">        None</span>

<span class="sd">    Example:</span>
<span class="sd">        # Create a DataFrame</span>
<span class="sd">        df = pd.DataFrame({&#39;x&#39;: [1, 2, 3], &#39;y&#39;: [4, 5, 6], &#39;z&#39;: [7, 8, 9]})</span>

<span class="sd">        # Plot the DataFrame</span>
<span class="sd">        multi_plot(df, title=&#39;Multiple Columns Plot&#39;, ylabels=[&#39;Y1&#39;, &#39;Y2&#39;, &#39;Y3&#39;])</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Set defaults</span>
    <span class="n">subplots</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">sharex</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="c1"># Parse keyword arguments</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fig&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ax&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">figsize</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;figsize&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">30</span><span class="p">))</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">xlabel</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;xlabel&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">ylabels</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ylabels&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;colors&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">style</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span>
    <span class="n">palette</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;palette&#39;</span><span class="p">,</span> <span class="s1">&#39;colorblind&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">fig</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">ax</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>

    <span class="c1"># Save room for the plot title</span>
    <span class="k">if</span> <span class="n">title</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.99</span><span class="p">)</span>

    <span class="c1"># Get the colors</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">colors</span><span class="p">:</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="n">get_colors</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">palette</span><span class="p">,</span> <span class="n">min_colors</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>

    <span class="c1"># Set the color cycle</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_prop_cycle</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="n">colors</span><span class="p">)</span>

    <span class="c1"># Calculate the number subplots</span>
    <span class="n">num_subplots</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>

    <span class="c1"># Set the keyword arguments for the plot</span>
    <span class="n">pandas_kwargs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">pandas_kwargs</span><span class="p">[</span><span class="s1">&#39;fig&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fig</span>
    <span class="n">pandas_kwargs</span><span class="p">[</span><span class="s1">&#39;ax&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ax</span>
    <span class="n">pandas_kwargs</span><span class="p">[</span><span class="s1">&#39;subplots&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">subplots</span>
    <span class="n">pandas_kwargs</span><span class="p">[</span><span class="s1">&#39;sharex&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sharex</span>
    <span class="n">pandas_kwargs</span><span class="p">[</span><span class="s1">&#39;xlabel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">xlabel</span>
    <span class="n">pandas_kwargs</span><span class="p">[</span><span class="s1">&#39;figsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">figsize</span>
    <span class="n">pandas_kwargs</span><span class="p">[</span><span class="s1">&#39;style&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">style</span>
    <span class="n">pandas_kwargs</span><span class="p">[</span><span class="s1">&#39;legend&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="c1"># Create the plot</span>
    <span class="n">axes</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="o">**</span><span class="n">pandas_kwargs</span><span class="p">)</span>

    <span class="c1"># Set the title</span>
    <span class="k">if</span> <span class="n">title</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>

    <span class="c1"># Label the y-axes</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">ylabels</span><span class="p">:</span>
        <span class="n">ylabels</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span>

    <span class="c1"># Label each sub-plot&#39;s y-axis</span>
    <span class="k">for</span> <span class="n">subplot_axis</span><span class="p">,</span> <span class="n">ylabel</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">axes</span><span class="p">,</span> <span class="n">ylabels</span><span class="p">):</span>
        <span class="n">subplot_axis</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">ylabel</span><span class="p">)</span>

    <span class="c1"># Set tight layout. This resolves a lot of layout issues.</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">fig</span></div>



<span class="c1"># def plot_dataframe(*args) -&gt; hv.core.overlay.Overlay:</span>
<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#     This function creates a plot using Holoviews and Pandas DataFrame.</span>

<span class="c1">#     :param *args: Positional arguments required for the function.</span>
<span class="c1">#                   The arguments must be provided in the following order:</span>
<span class="c1">#         1. df (pd.DataFrame): The DataFrame containing the data to be plotted.</span>
<span class="c1">#         2. title (str): The title of the plot.</span>
<span class="c1">#         3. legend_values (list): The values for the legend.</span>
<span class="c1">#         4. xlabel (str): The label for the x-axis.</span>
<span class="c1">#         5. ylabel (str): The label for the y-axis.</span>
<span class="c1">#         6. figsize (tuple): The figure size as a tuple of width and height.</span>
<span class="c1">#         7. line_style (str): The line style for the plot.</span>
<span class="c1">#         8. color_palette (str): The color palette to use.</span>

<span class="c1">#     :type *args: variable arguments</span>

<span class="c1">#     :raises ValueError: If the number of arguments is not equal to 8.</span>

<span class="c1">#     :returns: A Holoviews Overlay object representing the plot.</span>
<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#     import holoviews as hv</span>
<span class="c1">#     from holoviews import opts</span>

<span class="c1">#     # Assign positional arguments to variables</span>
<span class="c1">#     if len(args) != 8:</span>
<span class="c1">#         raise ValueError(</span>
<span class="c1">#             &quot;The following eight arguments are required: df, title, legend_values, xlabel, &quot;</span>
<span class="c1">#             &quot;ylabel, figsize, line_style, color_palette&quot;)</span>

<span class="c1">#     df: pd.DataFrame</span>
<span class="c1">#     title: str</span>
<span class="c1">#     legend_values: list</span>
<span class="c1">#     xlabel: str</span>
<span class="c1">#     ylabel: str</span>
<span class="c1">#     figsize: tuple</span>
<span class="c1">#     line_style: str</span>
<span class="c1">#     color_palette: str</span>

<span class="c1">#     df, title, legend_values, xlabel, ylabel, figsize, line_style, color_palette = args</span>

<span class="c1">#     # Convert the dataframe to a Holoviews Dataset</span>
<span class="c1">#     dataset = hv.Dataset(df, kdims=[xlabel], vdims=list(df.columns))</span>

<span class="c1">#     # Define the style options</span>
<span class="c1">#     style_opts = opts.Curve(line_width=2, line_style=line_style)</span>

<span class="c1">#     # Generate the color palette</span>
<span class="c1">#     color_palette = hv.plotting.util.process_cmap(color_palette, categorical=True)</span>
<span class="c1">#     color_cycle = color_palette[0:len(df.columns)]</span>

<span class="c1">#     # Create the plot</span>
<span class="c1">#     myplot = dataset.to(hv.Curve, xlabel, list(df.columns), label=legend_values).opts(</span>
<span class="c1">#         opts.Curve(color=color_cycle, **style_opts), opts.Overlay(legend_position=&#39;right&#39;),</span>
<span class="c1">#         opts.Curve(width=figsize[0], height=figsize[1]), title=title, xlabel=xlabel, ylabel=ylabel</span>
<span class="c1">#     )</span>

<span class="c1">#     return myplot</span>


<div class="viewcode-block" id="plot_all_files">
<a class="viewcode-back" href="../../../api.html#cequalw2.visualization.plot_all_files">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">plot_all_files</span><span class="p">(</span><span class="n">plot_control_yaml</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">model_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">year</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">filetype</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;png&#39;</span><span class="p">,</span>
                   <span class="n">VERBOSE</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Plot all files specified in the plot control YAML file.</span>

<span class="sd">    :param plot_control_yaml: Path to the plot control YAML file.</span>
<span class="sd">    :type plot_control_yaml: str</span>
<span class="sd">    :param model_path: Path to the model files directory.</span>
<span class="sd">    :type model_path: str</span>
<span class="sd">    :param year: Start year of the simulation.</span>
<span class="sd">    :type year: int</span>
<span class="sd">    :param filetype: Filetype for saving the plots (e.g., &#39;png&#39;, &#39;pdf&#39;, &#39;svg&#39;). Defaults to &#39;png&#39;.</span>
<span class="sd">    :type filetype: str</span>
<span class="sd">    :param VERBOSE: Flag indicating verbose output. Defaults to False.</span>
<span class="sd">    :type VERBOSE: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Read the plot control file</span>
    <span class="n">control_df</span> <span class="o">=</span> <span class="n">read_plot_control</span><span class="p">(</span><span class="n">plot_control_yaml</span><span class="p">)</span>

    <span class="c1"># Iterate over the data frame, plot each file, and save</span>
    <span class="c1"># an image file next to each data file in the model</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">control_df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="c1"># Get the plotting parameters</span>
        <span class="n">params</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s1">&#39;Filename&#39;</span><span class="p">]</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s1">&#39;Columns&#39;</span><span class="p">]</span>
        <span class="n">ylabels</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s1">&#39;Labels&#39;</span><span class="p">]</span>
        <span class="n">plot_type</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s1">&#39;PlotType&#39;</span><span class="p">]</span>

        <span class="c1"># Open and read file</span>
        <span class="n">inpath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">model_path</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">VERBOSE</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Reading </span><span class="si">{</span><span class="n">inpath</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">read</span><span class="p">(</span><span class="n">inpath</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">columns</span><span class="p">)</span>

        <span class="c1"># Plot the data</span>
        <span class="n">plots</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s1">&#39;combined&#39;</span><span class="p">:</span>
            <span class="n">ts_plot</span> <span class="o">=</span> <span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">y_label</span><span class="o">=</span><span class="n">ylabels</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">colors</span><span class="o">=</span><span class="n">k2</span><span class="p">)</span>
            <span class="n">ts_plot</span><span class="o">.</span><span class="n">plot_type</span> <span class="o">=</span> <span class="n">plot_type</span>
            <span class="n">plots</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ts_plot</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s1">&#39;subplots&#39;</span><span class="p">:</span>
            <span class="c1"># ts_plot = multi_plot(df, ylabels=ylabels, colors=k2)</span>
            <span class="n">ts_plot</span> <span class="o">=</span> <span class="n">multi_plot</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">ylabels</span><span class="o">=</span><span class="n">ylabels</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s1">&#39;tab10&#39;</span><span class="p">)</span>
            <span class="n">ts_plot</span><span class="o">.</span><span class="n">plot_type</span> <span class="o">=</span> <span class="n">plot_type</span>
            <span class="n">plots</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ts_plot</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s1">&#39;separate&#39;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
                <span class="n">ts_plot</span> <span class="o">=</span> <span class="n">simple_plot</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">ylabel</span><span class="o">=</span><span class="n">ylabels</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">colors</span><span class="o">=</span><span class="n">k2</span><span class="p">)</span>
                <span class="n">ts_plot</span><span class="o">.</span><span class="n">plot_type</span> <span class="o">=</span> <span class="n">plot_type</span>
                <span class="n">ts_plot</span><span class="o">.</span><span class="n">variable_name</span> <span class="o">=</span> <span class="n">col</span>
                <span class="n">plots</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ts_plot</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Plot type not specified for </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="c1"># Save the figure</span>
        <span class="k">for</span> <span class="n">ts_plot</span> <span class="ow">in</span> <span class="n">plots</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filetype</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">ft</span> <span class="ow">in</span> <span class="n">filetype</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">ts_plot</span><span class="o">.</span><span class="n">plot_type</span> <span class="o">==</span> <span class="s1">&#39;separate&#39;</span><span class="p">:</span>
                        <span class="n">outpath</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">inpath</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="n">ts_plot</span><span class="o">.</span><span class="n">variable_name</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="n">ft</span><span class="si">}</span><span class="s1">&#39;</span>
                        <span class="n">ts_plot</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">outpath</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">outpath</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">inpath</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="n">ft</span><span class="si">}</span><span class="s1">&#39;</span>
                        <span class="n">ts_plot</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">outpath</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filetype</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">ts_plot</span><span class="o">.</span><span class="n">plot_type</span> <span class="o">==</span> <span class="s1">&#39;separate&#39;</span><span class="p">:</span>
                    <span class="n">outpath</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">inpath</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="n">ts_plot</span><span class="o">.</span><span class="n">variable_name</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="n">filetype</span><span class="si">}</span><span class="s1">&#39;</span>
                    <span class="n">ts_plot</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">outpath</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">outpath</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">inpath</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="n">ts_plot</span><span class="o">.</span><span class="n">variable_name</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="n">filetype</span><span class="si">}</span><span class="s1">&#39;</span>
                    <span class="n">ts_plot</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">outpath</span><span class="p">)</span></div>


                    
<div class="viewcode-block" id="tiny_plot">
<a class="viewcode-back" href="../../../api.html#cequalw2.visualization.tiny_plot">[docs]</a>
<span class="nd">@mpl</span><span class="o">.</span><span class="n">rc_context</span><span class="p">({</span><span class="s1">&#39;axes.labelsize&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
<span class="k">def</span><span class="w"> </span><span class="nf">tiny_plot</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a tiny plot for generating app icons.</span>

<span class="sd">    This function creates a tiny plot using the specified DataFrame and additional keyword arguments.</span>
<span class="sd">    The plot is customized to have a small size of 3x3 inches and a font size of 3 points.</span>
<span class="sd">    It utilizes the &#39;w2.plot&#39; function for the actual plotting.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        df (pandas.DataFrame): The DataFrame containing the data to be plotted.</span>
<span class="sd">        **kwargs: Additional keyword arguments to be passed to the &#39;w2.plot&#39; function.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; df = pd.DataFrame(...)</span>
<span class="sd">        &gt;&gt;&gt; tiny_plot(df, title=&#39;My App Icon&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;figsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;fontsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fig</span></div>


<div class="viewcode-block" id="tiny_multi_plot">
<a class="viewcode-back" href="../../../api.html#cequalw2.visualization.tiny_multi_plot">[docs]</a>
<span class="nd">@mpl</span><span class="o">.</span><span class="n">rc_context</span><span class="p">({</span><span class="s1">&#39;axes.labelsize&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
<span class="k">def</span><span class="w"> </span><span class="nf">tiny_multi_plot</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a tiny multi-plot for generating app icons.</span>

<span class="sd">    This function creates a tiny multi-plot using the specified DataFrame and additional keyword arguments.</span>
<span class="sd">    The plot is customized to have a small size of 3x3 inches and a font size of 3 points.</span>
<span class="sd">    It utilizes the &#39;w2.multi_plot&#39; function for the actual plotting.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        df (pandas.DataFrame): The DataFrame containing the data to be plotted.</span>
<span class="sd">        **kwargs: Additional keyword arguments to be passed to the &#39;w2.multi_plot&#39; function.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; df = pd.DataFrame(...)</span>
<span class="sd">        &gt;&gt;&gt; tiny_multi_plot(df, title=&#39;My App Icon&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;figsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;fontsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">multi_plot</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fig</span></div>



<div class="viewcode-block" id="hv_multi_plot">
<a class="viewcode-back" href="../../../api.html#cequalw2.visualization.hv_multi_plot">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">hv_multi_plot</span><span class="p">(</span><span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a multi-plot using Holoviews.</span>

<span class="sd">    This function creates a multi-plot using the specified DataFrame and additional keyword arguments.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">import</span><span class="w"> </span><span class="nn">holoviews</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">hv</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">hvplot.pandas</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">panel</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pn</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">holoviews</span><span class="w"> </span><span class="kn">import</span> <span class="n">opts</span>
    <span class="n">hv</span><span class="o">.</span><span class="n">extension</span><span class="p">(</span><span class="s1">&#39;bokeh&#39;</span><span class="p">)</span>

    <span class="c1"># Parse keyword arguments</span>
    <span class="n">plot_width</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;plot_width&#39;</span><span class="p">,</span> <span class="mi">1400</span><span class="p">)</span>
    <span class="n">plot_height</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;plot_height&#39;</span><span class="p">,</span> <span class="mi">600</span><span class="p">)</span>
    <span class="n">line_color</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;line_color&#39;</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">)</span>
    <span class="n">line_width</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;line_width&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="c1"># Convert the dataframe to a Holoviews Dataset</span>
    <span class="n">dataset</span> <span class="o">=</span> <span class="n">hv</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">kdims</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Date&#39;</span><span class="p">])</span>

    <span class="c1"># Create a subplot for each column</span>
    <span class="n">subplots</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">subplot</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">hv</span><span class="o">.</span><span class="n">Curve</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">column</span><span class="p">)</span><span class="o">.</span><span class="n">opts</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;Date&#39;</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="n">column</span><span class="p">)</span><span class="o">.</span><span class="n">opts</span><span class="p">(</span>
            <span class="n">opts</span><span class="o">.</span><span class="n">Curve</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="n">plot_width</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">plot_height</span><span class="p">,</span> <span class="n">line_color</span><span class="o">=</span><span class="n">line_color</span><span class="p">,</span> <span class="n">line_width</span><span class="o">=</span><span class="n">line_width</span><span class="p">,</span>
                <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;hover&#39;</span><span class="p">])</span>
        <span class="p">)</span>
        <span class="n">subplots</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">subplot</span><span class="p">)</span>

    <span class="c1"># Combine all subplots into a single column layout</span>
    <span class="n">layout</span> <span class="o">=</span> <span class="n">hv</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">subplots</span><span class="p">)</span><span class="o">.</span><span class="n">cols</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="c1"># Create a tab with the Holoviews plot</span>
    <span class="n">tab</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">panel</span><span class="p">(</span><span class="n">layout</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Water Quality Time Series&#39;</span><span class="p">)</span>

    <span class="c1"># Create a Panel with the tab</span>
    <span class="n">panel</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">Tabs</span><span class="p">((</span><span class="s1">&#39;Water Quality&#39;</span><span class="p">,</span> <span class="n">tab</span><span class="p">))</span>

    <span class="c1"># Show the Panel</span>
    <span class="n">panel</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div>



<span class="c1"># def hv_plot(df: pd.DataFrame, colors=None, plot_width=1400, plot_height=600, legend_position=&#39;bottom&#39;,</span>
<span class="c1">#     legend_offset=(0, -1)):</span>
<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#     Plots multiple time series curves with customizable options using holoviews.</span>
<span class="c1"># </span>
<span class="c1">#     Parameters:</span>
<span class="c1">#     - df (pandas DataFrame): A single DataFrame containing multiple columns of time series data.</span>
<span class="c1">#     - colors (list): A list of colors to be applied to each curve. If not provided, default colors will be used.</span>
<span class="c1"># </span>
<span class="c1">#     Returns:</span>
<span class="c1">#     - holoviews.core.overlay.NdOverlay: The HoloViews NdOverlay object containing the plotted curves.</span>
<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#     import holoviews as hv</span>
<span class="c1">#     from holoviews import opts</span>
<span class="c1">#     hv.extension(&#39;bokeh&#39;)</span>
<span class="c1"># </span>
<span class="c1">#     curves = []</span>
<span class="c1"># </span>
<span class="c1">#     # Generate default colors if not provided</span>
<span class="c1">#     if not colors:</span>
<span class="c1">#         colors = hv.plotting.util.generate_palette(len(df.columns) - 1)</span>
<span class="c1"># </span>
<span class="c1">#     # # Convert the &#39;Date&#39; column to datetime type</span>
<span class="c1">#     # df[&#39;Date&#39;] = pd.to_datetime(df[&#39;Date&#39;])</span>
<span class="c1"># </span>
<span class="c1">#     for i, column in enumerate(df.columns):</span>
<span class="c1">#         # Create a HoloViews Curve plot for each column</span>
<span class="c1">#         curve = hv.Curve(df, kdims=[&#39;Date&#39;], vdims=[column]).opts(</span>
<span class="c1">#             opts.Curve(width=plot_width, height=plot_height, line_color=colors[i], line_width=1, tools=[&#39;hover&#39;])</span>
<span class="c1">#         )</span>
<span class="c1"># </span>
<span class="c1">#         curves.append(curve)</span>
<span class="c1"># </span>
<span class="c1">#     # Overlay curves using an NdOverlay</span>
<span class="c1">#     overlay = hv.NdOverlay({column: curve for column, curve in zip(df.columns, curves)}).opts(tools=[&#39;hover&#39;])</span>
<span class="c1">#     overlay.opts(legend_position=legend_position, legend_offset=legend_offset)</span>
<span class="c1"># </span>
<span class="c1">#     # Display the plot</span>
<span class="c1">#     return overlay</span>

<div class="viewcode-block" id="color_cycle">
<a class="viewcode-back" href="../../../api.html#cequalw2.visualization.color_cycle">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">color_cycle</span><span class="p">(</span><span class="n">colors</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">num_colors</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Cycle through a list of colors&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_colors</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">colors</span><span class="p">[</span><span class="n">i</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">)]</span></div>


<div class="viewcode-block" id="hv_plot">
<a class="viewcode-back" href="../../../api.html#cequalw2.visualization.hv_plot">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">hv_plot</span><span class="p">(</span><span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1200</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span> <span class="n">bgcolor</span><span class="o">=</span><span class="s1">&#39;lightgray&#39;</span><span class="p">,</span> <span class="n">line_color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span>
    <span class="n">fontsize</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;xlabel&#39;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s1">&#39;ylabel&#39;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s1">&#39;xticks&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;yticks&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">}):</span>

    <span class="c1"># Create a HoloViews Curve element for each data column</span>
    <span class="n">curves</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
    <span class="n">tooltips</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>

    <span class="c1"># Specify format for the date axis</span>

    <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="c1"># Create a HoloViews Curve element for each data column</span>
        <span class="n">curve</span> <span class="o">=</span> <span class="n">hv</span><span class="o">.</span><span class="n">Curve</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;Date&#39;</span><span class="p">,</span> <span class="n">column</span><span class="p">)</span><span class="o">.</span><span class="n">opts</span><span class="p">(</span>
            <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
            <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
            <span class="c1"># bgcolor=&#39;black&#39;,</span>
            <span class="n">line_color</span><span class="o">=</span><span class="s1">&#39;dodgerblue&#39;</span><span class="p">,</span>
            <span class="n">fontsize</span><span class="o">=</span><span class="n">fontsize</span>
        <span class="p">)</span>

        <span class="n">date_axis_formatter</span> <span class="o">=</span> <span class="n">DatetimeTickFormatter</span><span class="p">(</span>
            <span class="n">minutes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;%H:%M&quot;</span><span class="p">],</span>
            <span class="n">hours</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;%H:%M&quot;</span><span class="p">],</span>
            <span class="n">days</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2"> %b %Y&quot;</span><span class="p">],</span>
            <span class="n">months</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2"> %b %Y&quot;</span><span class="p">],</span>
            <span class="n">years</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2"> %b %Y&quot;</span><span class="p">]</span>
        <span class="p">)</span>

        <span class="n">curve</span><span class="o">.</span><span class="n">opts</span><span class="p">(</span>
            <span class="n">show_grid</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">show_legend</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">xformatter</span><span class="o">=</span><span class="n">date_axis_formatter</span>
        <span class="p">)</span>

        <span class="c1"># Create a HoverTool to display tooltips. Show the values of the Date column and the selected column</span>
        <span class="n">hover_tool</span> <span class="o">=</span> <span class="n">HoverTool</span><span class="p">(</span>
            <span class="n">tooltips</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;Date&#39;</span><span class="p">,</span> <span class="s1">&#39;@Date{</span><span class="si">%d</span><span class="s1"> %b %Y %H:%M}&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="s1">&#39;$y&#39;</span><span class="p">)],</span> <span class="n">formatters</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;@Date&quot;</span><span class="p">:</span> <span class="s2">&quot;datetime&quot;</span><span class="p">}</span>
        <span class="p">)</span>

        <span class="c1"># Add the curve and hover tool to the dictionaries</span>
        <span class="n">curves</span><span class="p">[</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="n">curve</span>
        <span class="n">tooltips</span><span class="p">[</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="n">hover_tool</span>

    <span class="k">return</span> <span class="n">curves</span><span class="p">,</span> <span class="n">tooltips</span></div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Todd E. Steissberg, PhD, PE.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>